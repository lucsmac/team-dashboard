# üéØ Ideias de Tracking de Suporte - Team Report Dashboard

## Contexto

O time atua em tr√™s frentes:
- **Roadmap**: Demandas planejadas e previs√≠veis (4DX, Redemoinho, Stellantis, Projetos Especiais)
- **Service Desk**: Suporte di√°rio com demandas imprevis√≠veis (r√°pidas, normais, demoradas)
- **Genius**: Suporte especializado
  - Customiza√ß√£o de temas dos canais
  - Nitro (automa√ß√£o/integra√ß√µes)
  - Autobot (chatbot)

**Problema**: Atualmente s√≥ rastreamos roadmap. Suporte √© invis√≠vel no dashboard.

---

## üìä PROPOSTA: Sistema H√≠brido Roadmap + Suporte

### **Problema Atual**
- ‚úÖ Roadmap: Demandas planejadas, previs√≠veis
- ‚ùå Suporte: Demandas imprevis√≠veis (Service Desk, Genius)
- ‚ùå N√£o h√° separa√ß√£o clara entre os dois mundos
- ‚ùå M√©tricas de suporte n√£o s√£o capturadas (volume, tempo de resposta, SLA)

### **Vis√£o da Solu√ß√£o**
Criar um **sistema dual** que:
1. Mant√©m roadmap estrat√©gico vis√≠vel
2. Adiciona tracking de suporte operacional
3. Unifica m√©tricas (carga real = roadmap + suporte)
4. Permite an√°lise de **custo de oportunidade** (quanto tempo vai pra suporte vs features)

---

## üìã ARQUITETURA PROPOSTA

### **1. Modelo de Dados Expandido**

#### **1.1 Nova entidade: `SupportTicket`**
```prisma
model SupportTicket {
  id              String    @id @default(uuid())
  ticketNumber    String?   @unique         // Ex: SD-2024-001, GEN-2024-045
  category        String                    // 'Service Desk' | 'Genius' | 'Nitro' | 'Autobot'
  subCategory     String?                   // 'Customiza√ß√£o Tema' | 'Integra√ß√£o' | 'Chatbot'
  title           String
  description     String?
  requesterId     String?                   // Usu√°rio/cliente que abriu
  requesterName   String?

  // Classifica√ß√£o de complexidade
  complexity      String                    // 'rapida' | 'normal' | 'demorada'
  priority        String                    // 'critica' | 'alta' | 'media' | 'baixa'

  // Status e tempo
  status          String                    // 'aberto' | 'em-atendimento' | 'aguardando-cliente' | 'resolvido' | 'cancelado'
  openedAt        DateTime  @default(now())
  firstResponseAt DateTime?
  resolvedAt      DateTime?
  closedAt        DateTime?

  // SLA tracking
  slaDeadline     DateTime?                 // Prazo baseado na complexidade
  slaViolated     Boolean   @default(false)

  // Relacionamentos
  assignedDevs    String[]                  // Nomes dos devs alocados
  relatedDemandId String?                   // Se virou uma demanda de roadmap

  // M√©tricas
  timeToFirstResponse  Int?                 // Minutos at√© primeira resposta
  timeToResolution     Int?                 // Minutos at√© resolu√ß√£o
  reopenCount          Int      @default(0) // Quantas vezes foi reaberto

  // Metadados
  tags            String[]                  // Ex: ['bug', 'urgente', 'cliente-vip']
  links           String[]                  // Zendesk, Jira, etc
  internalNotes   String?

  createdAt       DateTime  @default(now())
  updatedAt       DateTime  @updatedAt

  @@index([category])
  @@index([status])
  @@index([complexity])
  @@index([openedAt])
  @@index([resolvedAt])
  @@index([slaDeadline])
  @@map("support_tickets")
}
```

#### **1.2 Tabela de Configura√ß√£o de SLA**
```prisma
model SlaConfig {
  id                 String   @id @default(uuid())
  category           String   // 'Service Desk' | 'Genius'
  complexity         String   // 'rapida' | 'normal' | 'demorada'
  responseTimeMinutes Int     // Tempo para primeira resposta
  resolutionTimeHours Int     // Tempo total para resolver

  @@unique([category, complexity])
  @@map("sla_config")
}
```

Exemplos de SLA:
```javascript
// Service Desk
{ category: 'Service Desk', complexity: 'rapida', responseTime: 15min, resolution: 4h }
{ category: 'Service Desk', complexity: 'normal', responseTime: 30min, resolution: 24h }
{ category: 'Service Desk', complexity: 'demorada', responseTime: 1h, resolution: 72h }

// Genius (mais √°gil)
{ category: 'Genius', complexity: 'rapida', responseTime: 5min, resolution: 1h }
{ category: 'Genius', complexity: 'normal', responseTime: 15min, resolution: 8h }
```

#### **1.3 Atualiza√ß√£o do modelo `Dev`**
```prisma
model Dev {
  // ... campos existentes

  // Novo campo: tipo de atua√ß√£o principal
  primaryWorkType String @default("roadmap") // 'roadmap' | 'suporte' | 'hibrido'

  // Capacidade semanal (horas)
  weeklyCapacity  Int?   @default(40)

  // Percentual alocado em suporte (calculado automaticamente)
  supportAllocationPercent Int? @default(0)
}
```

---

### **2. Nova Aba: "Suporte"**

Adicionar ao `App.jsx`:
```javascript
<Route path="/support" element={<SupportPage />} />
```

#### **Componente: `SupportPage.jsx`**

**Features principais**:

1. **Dashboard de Suporte** (topo da p√°gina)
   - Cards com m√©tricas:
     - üì® Tickets Abertos Hoje
     - ‚è±Ô∏è Tempo M√©dio de Resposta
     - ‚úÖ Taxa de Resolu√ß√£o (SLA)
     - üî• Tickets Cr√≠ticos/Vencidos
   - Gr√°fico de barras: Volume por dia (√∫ltimos 7 dias)
   - Gr√°fico de pizza: Distribui√ß√£o por categoria (Service Desk vs Genius vs Nitro vs Autobot)

2. **Kanban de Tickets**
   - Colunas: `Aberto` | `Em Atendimento` | `Aguardando Cliente` | `Resolvido`
   - Filtros:
     - Por categoria (Service Desk, Genius, Nitro, Autobot)
     - Por complexidade (R√°pida, Normal, Demorada)
     - Por dev respons√°vel
     - Por SLA (violado, pr√≥ximo do prazo, dentro do prazo)
   - Drag & drop entre colunas (atualiza status)
   - Badge colorido: üü¢ No prazo | üü° Pr√≥ximo do limite | üî¥ Atrasado

3. **Formul√°rio de Cria√ß√£o de Ticket**
   - Campos:
     - Categoria (dropdown: Service Desk, Genius, Nitro, Autobot)
     - Subcategoria (din√¢mica baseada na categoria)
     - T√≠tulo
     - Descri√ß√£o
     - Complexidade (bot√µes: R√°pida/Normal/Demorada)
     - Prioridade
     - Atribuir a dev(s)
     - Links externos (Zendesk, etc)
   - Auto-c√°lculo de SLA deadline ao selecionar categoria + complexidade

4. **Hist√≥rico e Busca**
   - Lista de tickets resolvidos (√∫ltimos 30 dias)
   - Busca por n√∫mero, t√≠tulo, cliente
   - Export para Excel (relat√≥rio de produtividade)

---

### **3. Integra√ß√£o com Overview (Aba Resumo)**

#### **3.1 Novos Metrics Cards**
Adicionar ao `MetricsCards.jsx`:

```javascript
// Card 5: Tickets de Suporte Hoje
{
  title: "Tickets Hoje",
  value: supportTicketsToday,
  description: `${supportTicketsResolved} resolvidos`,
  icon: Ticket,
  trend: "+12% vs ontem"
}

// Card 6: SLA Compliance
{
  title: "SLA",
  value: `${slaComplianceRate}%`,
  description: "Taxa de cumprimento",
  icon: Clock,
  color: slaComplianceRate >= 90 ? 'green' : 'red'
}
```

#### **3.2 Novo Gr√°fico: Roadmap vs Suporte**
- Gr√°fico de barras empilhadas
- Eixo X: Devs
- Eixo Y: Horas/semana
- Barras:
  - üîµ Roadmap (timeline tasks planejadas)
  - üü† Suporte (tickets atendidos)
  - üü¢ Capacidade ociosa
- **Insight**: Visualizar quanto tempo √© "roubado" do roadmap pelo suporte

#### **3.3 Alertas no Overview**
Adicionar ao `RecentHighlights.jsx`:
- üö® "Service Desk com 5 tickets cr√≠ticos sem atendimento"
- ‚ö†Ô∏è "Dev Jo√£o est√° 80% alocado em suporte essa semana"
- ‚è∞ "3 tickets est√£o pr√≥ximos de violar SLA"

---

### **4. Integra√ß√£o com Aba "Time"**

#### **4.1 Expandir `TeamMemberCard.jsx`**
Adicionar se√ß√£o de **Estat√≠sticas de Suporte** no card:

```javascript
// Nova se√ß√£o no card
<div className="border-t pt-3">
  <div className="text-xs text-muted-foreground mb-2">Suporte esta semana</div>
  <div className="flex items-center gap-4">
    <div>
      <div className="text-lg font-bold">{ticketsAtendidos}</div>
      <div className="text-xs">tickets</div>
    </div>
    <div>
      <div className="text-lg font-bold">{tempoMedioResposta}min</div>
      <div className="text-xs">tempo m√©dio</div>
    </div>
    <div>
      <Badge variant={slaRate >= 90 ? 'success' : 'destructive'}>
        {slaRate}% SLA
      </Badge>
    </div>
  </div>
</div>
```

#### **4.2 Filtro adicional**
- Adicionar toggle: "Mostrar apenas time de suporte" vs "Mostrar apenas roadmap"

---

### **5. Nova Aba: "An√°lise de Carga"**

P√°gina dedicada para **planejamento de capacidade**:

#### **5.1 Visualiza√ß√£o: Heatmap Semanal**
- Grid: Devs x Semanas
- Cores:
  - üü¢ Verde: <60% capacidade (dispon√≠vel para roadmap)
  - üü° Amarelo: 60-80% (balanceado)
  - üü† Laranja: 80-100% (sobrecarregado)
  - üî¥ Vermelho: >100% (insustent√°vel)
- C√°lculo:
  ```
  Carga = (Horas em Roadmap + Horas em Suporte) / Capacidade Semanal
  ```

#### **5.2 Previs√£o de Suporte**
- Gr√°fico de linha: Volume de tickets nos √∫ltimos 30 dias
- M√©dia m√≥vel de 7 dias
- Previs√£o para pr√≥xima semana (baseada em tend√™ncia)
- **Insight**: "Baseado na m√©dia, esperamos 35 tickets na pr√≥xima semana"

#### **5.3 Custo de Oportunidade**
- Tabela:
  | Dev | Roadmap (h) | Suporte (h) | % Suporte | Custo (features n√£o desenvolvidas) |
  - Orden√°vel por % Suporte (decrescente)
  - **Insight**: "Time gastou 120h em suporte essa semana, equivalente a 3 features m√©dias"

---

### **6. M√©tricas e KPIs de Suporte**

#### **6.1 Endpoint de Analytics**
```javascript
GET /api/support/analytics?startDate=2025-10-01&endDate=2025-10-15

Response:
{
  totalTickets: 145,
  ticketsByCategory: {
    'Service Desk': 80,
    'Genius': 50,
    'Nitro': 10,
    'Autobot': 5
  },
  ticketsByComplexity: {
    'rapida': 90,
    'normal': 40,
    'demorada': 15
  },
  avgTimeToFirstResponse: 18, // minutos
  avgTimeToResolution: 240,   // minutos
  slaCompliance: 92.5,        // %
  slaViolations: 11,
  topAgents: [
    { devName: 'Jo√£o', ticketsResolved: 25, avgResolutionTime: 180 },
    { devName: 'Maria', ticketsResolved: 22, avgResolutionTime: 200 }
  ],
  peakHours: [
    { hour: 9, count: 15 },
    { hour: 14, count: 18 }
  ],
  reopenRate: 8.5 // %
}
```

#### **6.2 Dashboard Executivo de Suporte**
Componente `SupportExecutiveSummary.jsx` com:
- üìä Gr√°fico de linha: Evolu√ß√£o do volume (√∫ltimos 3 meses)
- üìà Gr√°fico de barras: Taxa de SLA por categoria
- üïê Gr√°fico de √°rea: Distribui√ß√£o de tickets por hora do dia
- üèÜ Ranking: Top performers (mais tickets resolvidos, melhor SLA)

---

### **7. Automa√ß√µes Inteligentes**

#### **7.1 Auto-atribui√ß√£o**
- Algoritmo que distribui tickets novos baseado em:
  - Carga atual do dev
  - Especialidade (frontend, backend, etc)
  - Performance em SLA
  - Disponibilidade (n√£o est√° em f√©rias/licen√ßa)

```javascript
// L√≥gica sugerida
function autoAssignTicket(ticket) {
  const availableDevs = devs.filter(d =>
    d.primaryWorkType === 'suporte' || d.primaryWorkType === 'hibrido'
  );

  const scores = availableDevs.map(dev => ({
    dev,
    score: calculateScore(dev, ticket)
  }));

  // Score baseado em: carga (40%), especialidade (30%), SLA hist√≥rico (30%)
  const bestDev = scores.sort((a, b) => b.score - a.score)[0];
  return bestDev.dev;
}
```

#### **7.2 Alertas Proativos**
Sistema que envia notifica√ß√µes quando:
- ‚è∞ Ticket est√° 80% pr√≥ximo do SLA deadline
- üî• Ticket cr√≠tico sem atendimento h√° 15min
- üìä Volume de tickets 50% acima da m√©dia di√°ria
- üë§ Dev com >10 tickets abertos simultaneamente
- üö® Taxa de SLA abaixo de 85% no dia

#### **7.3 Convers√£o Ticket ‚Üí Demanda**
- Bot√£o "Promover para Roadmap"
- Quando ticket revela necessidade de feature, converte em Demanda
- Mant√©m hist√≥rico linkado: `relatedDemandId`

---

### **8. Integra√ß√µes Externas**

#### **8.1 Importa√ß√£o de Tickets**
Connector com ferramentas de help desk:

```javascript
// API de integra√ß√£o
POST /api/support/import/zendesk
POST /api/support/import/freshdesk
POST /api/support/import/jira

// Webhook para sincroniza√ß√£o em tempo real
POST /api/webhooks/zendesk
```

#### **8.2 Export de Relat√≥rios**
```javascript
GET /api/support/export/xlsx?period=last-week
GET /api/support/export/csv?category=genius
GET /api/support/export/pdf?type=executive-summary
```

---

## üéØ ROADMAP DE IMPLEMENTA√á√ÉO

### **Fase 1: Foundation (MVP) - 2 semanas**
1. ‚úÖ Criar tabela `SupportTicket` e migrations
2. ‚úÖ Criar tabela `SlaConfig` com dados iniciais
3. ‚úÖ CRUD b√°sico de tickets (backend)
4. ‚úÖ P√°gina `/support` com lista de tickets
5. ‚úÖ Formul√°rio de cria√ß√£o de ticket
6. ‚úÖ C√°lculo autom√°tico de SLA deadline

### **Fase 2: Visualiza√ß√µes - 1 semana**
1. ‚úÖ Kanban de tickets
2. ‚úÖ Dashboard com m√©tricas b√°sicas (cards)
3. ‚úÖ Filtros (categoria, status, complexidade)
4. ‚úÖ Integra√ß√£o com aba Overview (novos cards)

### **Fase 3: Analytics - 1 semana**
1. ‚úÖ Endpoint `/api/support/analytics`
2. ‚úÖ Gr√°ficos de volume, SLA, distribui√ß√£o
3. ‚úÖ An√°lise de carga (roadmap vs suporte)
4. ‚úÖ Heatmap de capacidade

### **Fase 4: Automa√ß√£o - 1 semana**
1. ‚úÖ Auto-atribui√ß√£o de tickets
2. ‚úÖ Sistema de alertas (SLA pr√≥ximo de vencer)
3. ‚úÖ Convers√£o ticket ‚Üí demanda
4. ‚úÖ Export para Excel/CSV

### **Fase 5: Integra√ß√µes (opcional) - 2 semanas**
1. ‚úÖ Webhook Zendesk/Freshdesk
2. ‚úÖ Notifica√ß√µes Slack
3. ‚úÖ API p√∫blica para mobile/integra√ß√µes

---

## üíé BENEF√çCIOS

### **Para Gestores**
- üìä Visibilidade completa: roadmap + opera√ß√£o
- üí∞ Entender custo de oportunidade do suporte
- üéØ Tomar decis√µes data-driven: contratar mais gente de suporte?
- üìà Demonstrar valor com m√©tricas (SLA, volume resolvido)

### **Para Devs**
- üßæ Reconhecimento: trabalho de suporte fica vis√≠vel
- ‚è±Ô∏è Menos press√£o: SLA claro, n√£o √© "apagar inc√™ndio"
- üìã Organiza√ß√£o: tickets priorizados, sem perder no Slack

### **Para o Neg√≥cio**
- üöÄ Roadmap mais previs√≠vel (sabe quanto tempo vai pra suporte)
- üòä Clientes mais felizes (SLA rastreado, menor tempo de resposta)
- üîç Insights: padr√µes de problemas ‚Üí oportunidades de melhoria

---

## üî• DIFERENCIAIS vs Zendesk/Jira

Por que n√£o usar Zendesk + Jira separados?
1. ‚úÖ **Unificado**: Roadmap + Suporte na mesma ferramenta
2. ‚úÖ **Carga real**: V√™ quanto tempo cada dev gasta em cada coisa
3. ‚úÖ **Sem context switch**: Time trabalha em uma √∫nica plataforma
4. ‚úÖ **Customizado**: Feito sob medida para o fluxo da Autoforce
5. ‚úÖ **Custo zero**: N√£o paga licen√ßas de Zendesk (pode importar de l√°)

---

## üìå PR√ìXIMOS PASSOS

- [ ] Validar proposta com stakeholders
- [ ] Priorizar features (MVP vs Nice-to-have)
- [ ] Definir cronograma de implementa√ß√£o
- [ ] Iniciar Fase 1 (Foundation)
